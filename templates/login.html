<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Sign in</title>
  <style>
    :root{ --bg:#f7f7fb; --card:#ffffff; --text:#1f2030; --muted:#6a5b6f; --accent:#4c7dff; --border:rgba(0,0,0,.12); --input-bg:#ffffff; --input-text:#1f2030; }
    *{box-sizing:border-box} body{margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; background:var(--bg);}
    .wrap{min-height:100svh; display:grid; place-items:center; padding:16px;}
    .card{width:min(92vw,420px); background:var(--card); border:1px solid var(--border); border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,.08); padding:24px;}
    h1{margin:0 0 10px; color:var(--text); font-size:22px} p{margin:0 0 16px; color:var(--muted)}
    input{width:100%; padding:12px 14px; background:var(--input-bg); color:var(--input-text); border:1px solid var(--border); border-radius:10px; outline:none;}
    .row{display:flex; gap:12px; margin-top:12px; justify-content:flex-end}
    .btn{appearance:none; border:0; padding:12px 14px; border-radius:10px; cursor:pointer; font-weight:600; letter-spacing:.2px;}
    .btn-primary{background:var(--accent); color:#fff}
    .msg{margin-top:10px; font-size:13px; color:#b52424; display:none}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Welcome</h1>
      <p>Enter password to continue</p>
      <input id="pw" type="password" placeholder="Password"/>
      <div class="row"><button class="btn btn-primary" id="enter">Enter</button></div>
      <div class="msg" id="err"></div>
    </div>
  </div>

  <script>
    const enter = document.getElementById('enter');
    const pw = document.getElementById('pw');
    const err = document.getElementById('err');

    async function login(){
      err.style.display = 'none';
      const password = (pw.value||'').trim();
      if(!password){ err.textContent = 'Please enter a password.'; err.style.display='block'; return; }
      try{
        const res = await fetch('/auth/login', {
          method:'POST', headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ password })
        });
        if(!res.ok){
          const j = await res.json().catch(()=>({message:'Invalid password.'}));
          err.textContent = j.message || 'Invalid password.'; err.style.display = 'block'; return;
        }
        location.replace('/');
      }catch(e){ err.textContent = 'Network error.'; err.style.display = 'block'; }
    }
    enter.addEventListener('click', login);
    pw.addEventListener('keydown', e=>{ if(e.key==='Enter') login(); });
  </script>
</body>
</html>
